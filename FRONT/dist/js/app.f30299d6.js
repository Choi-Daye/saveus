(function(){"use strict";var e={4681:function(e,n,t){var o={};t.r(o),t.d(o,{A:function(){return R}});var s=t(5130),a=t(6768);const r={id:"app"};function i(e,n,t,o,s,i){const c=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(c)])}var c={name:"App"},l=t(1241);const u=(0,l.A)(c,[["render",i]]);var p=u,d=t(973),m=t.p+"img/public_transport_transparent.1865cc96.gif";const k={class:"wrapper"},g=(0,a.Lk)("div",{class:"main-page"},[(0,a.Lk)("div",{class:"content"},[(0,a.Lk)("img",{src:m,alt:"SaveUs"}),(0,a.Lk)("h1",{class:"main-title"},"SaveUs")])],-1),h={class:"buttons"},f={class:"btn"},y=(0,a.Lk)("button",{class:"learn-more"},[(0,a.Lk)("span",{class:"text"},"로그인 하기")],-1),b={class:"btn"},_=(0,a.Lk)("button",{class:"learn-more"},"서비스 사용하기",-1);function v(e,n,t,o,s,r){const i=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",k,[g,(0,a.Lk)("div",h,[(0,a.Lk)("div",f,[(0,a.bF)(i,{to:"/login"},{default:(0,a.k6)((()=>[y])),_:1})]),(0,a.Lk)("div",b,[(0,a.bF)(i,{to:"/MainOne"},{default:(0,a.k6)((()=>[_])),_:1})])])])}var L=t(4373);function w(e){let n=null;if(document.cookie&&""!==document.cookie){const t=document.cookie.split(";");for(let o=0;o<t.length;o++){const s=t[o].trim();if(s.substring(0,e.length+1)===e+"="){n=decodeURIComponent(s.substring(e.length+1));break}}}return n}var C={name:"IntroPage",data(){return{message:"",csrfToken:null}},created(){this.getCsrfToken().then((()=>{this.fetchIntroData()}))},methods:{async getCsrfToken(){const e="https://76ba208b8cb9.ngrok.app";console.log("---시작---"),console.log("IntroPage API Base URL:",e);try{const n=await L.A.get(`${e}/map/api/set-csrf-token/`,{withCredentials:!0});console.log("IntroPage CSRF token set successfully."),console.log("IntroPage Response data:",n.data);const t=n.data.csrfToken;this.csrfToken=t;const o=w("csrftoken");return console.log("IntroPage Retrieved CSRF token from cookie:",o),this.csrfToken=o||t,console.log("IntroPage CSRF 토큰:",this.csrfToken),this.csrfToken}catch(n){throw console.error("IntroPage Error setting CSRF token:",n),n}},async fetchIntroData(){const e="https://76ba208b8cb9.ngrok.app";console.log("Fetching intro data from:",`${e}/main/api/intro/`);try{const n=await fetch(`${e}/main/api/intro/`);if(!n.ok)throw new Error("Network response was not ok");const t=await n.json();console.log("IntroPage fetched data:",t),this.message=t.message}catch(n){console.error("Error fetching data:",n)}}}};const T=(0,l.A)(C,[["render",v]]);var S=T,P=t(4232);const A={class:"wrapper"},j=(0,a.Lk)("h1",null,"로그인을 진행해 주세요.",-1);function x(e,n,t,o,s,r){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",A,[j,(0,a.Lk)("button",{onClick:n[0]||(n[0]=(...n)=>e.redirectToNaverLogin&&e.redirectToNaverLogin(...n))},"네이버 로그인(노가다)"),(0,a.Lk)("button",{onClick:n[1]||(n[1]=n=>e.redirectToSocialLogin(e.naver))},"네이버 로그인"),(0,a.Lk)("button",{onClick:n[2]||(n[2]=n=>e.redirectToSocialLogin("google"))},"Google 로그인"),(0,a.Lk)("button",{onClick:n[3]||(n[3]=n=>e.redirectToSocialLogin("kakao"))},"Kakao 로그인")]),(0,a.Lk)("h1",null,(0,P.v_)(e.message),1)],64)}var R={name:"LoginPage",data(){return{message:"",loginUrls:{naver:"",google:"",kakao:""}}},created(){const e="https://76ba208b8cb9.ngrok.app";L.A.get(`${e}/user/api/login/`).then((e=>{this.message=e.data.message})).catch((e=>{console.error("Failed to fetch login message:",e)})),L.A.get(`${e}/api/social-login-urls/`).then((e=>{this.loginUrls=e.data})).catch((e=>{console.error("Failed to fetch social login URLs:",e)}))},methods:{redirectToNaverLogin(){const e="https://76ba208b8cb9.ngrok.app";window.location.href=`${e}/user/naver/login`},redirectToSocialLogin(e){const n=this.loginUrls[e];n&&(window.location.href=n)}}},F={mixins:[R]};const E=(0,l.A)(F,[["render",x]]);var M=E;const I={class:"container"},V={class:"input-data"},U=(0,a.Lk)("div",{class:"guide-text"},[(0,a.Lk)("p",null,"🏠 현재 등록된 거주지를 동까지 입력해주세요. 🏠")],-1),$={class:"input-wrapper"},X=(0,a.Lk)("span",null,"거주지",-1),N={class:"input-data"},O=(0,a.Lk)("div",{class:"guide-text"},[(0,a.Lk)("p",null,"🚎 매일 왕복해서 다니는 곳의 출발지/도착지를 입력하세요. 🚎")],-1),D={class:"input-wrapper"},Y=(0,a.Lk)("span",null,"출발지",-1),B={class:"input-wrapper"},H=(0,a.Lk)("span",null,"도착지",-1),J={class:"input-data"},K=(0,a.Lk)("div",{class:"guide-text"},[(0,a.Lk)("p",null,"🧐 본인이 해당되는 영역을 선택하세요. 🧐")],-1),W={class:"input-wrapper checkbox-group"},q=(0,a.Lk)("span",null," 연령대 ",-1),z={class:"checkbox-wrapper"},G={class:"checkbox-wrapper"},Q={class:"input-wrapper checkbox-wrapper single-checkbox"},Z=(0,a.Lk)("span",{class:"chceck-text"}," 소득 여부 ",-1),ee=(0,a.Lk)("div",{class:"submit-data"},[(0,a.Lk)("input",{type:"submit",value:"제출하기"})],-1),ne={key:0,id:"map-api"},te=(0,a.Lk)("div",{class:"guide-text"},[(0,a.Lk)("p",null,"🗺️ 자주 다니는 최적의 경로를 선택하세요. 🗺️")],-1),oe={key:1,id:"check-mycost"};function se(e,n,t,o,r,i){const c=(0,a.g2)("map-view");return(0,a.uX)(),(0,a.CE)("div",I,[(0,a.Lk)("form",{id:"main-form",onSubmit:n[8]||(n[8]=(0,s.D$)(((...n)=>e.handleSubmit&&e.handleSubmit(...n)),["prevent"]))},[(0,a.Lk)("div",V,[U,(0,a.Lk)("div",$,[X,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=n=>e.inputs.mem_home=n),placeholder:"경기 하남시 감이동"},null,512),[[s.Jo,e.inputs.mem_home]])])]),(0,a.Lk)("div",N,[O,(0,a.Lk)("div",D,[Y,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=n=>e.inputs.start_point=n),placeholder:"하남시 감일중앙로 20"},null,512),[[s.Jo,e.inputs.start_point]])]),(0,a.Lk)("div",B,[H,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":n[2]||(n[2]=n=>e.inputs.end_point=n),placeholder:"서울 서초구 동작대로 132"},null,512),[[s.Jo,e.inputs.end_point]])])]),(0,a.Lk)("div",J,[K,(0,a.Lk)("div",W,[q,(0,a.Lk)("div",z,[(0,a.Lk)("label",{class:(0,P.C4)({selected:e.inputs.mem_young_y})},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[3]||(n[3]=n=>e.inputs.mem_young_y=n),onChange:n[4]||(n[4]=n=>e.handleCheckboxChange("mem_young_y"))},null,544),[[s.lH,e.inputs.mem_young_y]]),(0,a.eW)(" 청년 (19세 ~ 34세) ")],2)]),(0,a.Lk)("div",G,[(0,a.Lk)("label",{class:(0,P.C4)({selected:e.inputs.mem_young_n})},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[5]||(n[5]=n=>e.inputs.mem_young_n=n),onChange:n[6]||(n[6]=n=>e.handleCheckboxChange("mem_young_n"))},null,544),[[s.lH,e.inputs.mem_young_n]]),(0,a.eW)(" 일반 ")],2)])]),(0,a.Lk)("div",Q,[Z,(0,a.Lk)("label",{class:(0,P.C4)({selected:e.inputs.mem_subsidiary_yn})},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[7]||(n[7]=n=>e.inputs.mem_subsidiary_yn=n)},null,512),[[s.lH,e.inputs.mem_subsidiary_yn]]),(0,a.eW)(" 저소득층 ")],2)])]),ee],32),e.showMapApi?((0,a.uX)(),(0,a.CE)("div",ne,[te,(0,a.bF)(c,{memHome:e.formData.mem_home,startPoint:e.formData.start_point,endPoint:e.formData.end_point,memYoungY:e.formData.mem_young_y,memYoungN:e.formData.mem_young_n,memSubsidiaryYn:e.formData.mem_subsidiary_yn},null,8,["memHome","startPoint","endPoint","memYoungY","memYoungN","memSubsidiaryYn"])])):(0,a.Q3)("",!0),e.showCheckButton?((0,a.uX)(),(0,a.CE)("div",oe,[(0,a.Lk)("input",{type:"button",value:"로그인해서 확인하기",onClick:n[9]||(n[9]=(...e)=>i.redirectToNaverLogin&&i.redirectToNaverLogin(...e))})])):(0,a.Q3)("",!0)])}const ae=e=>((0,a.Qi)("data-v-5c5679aa"),e=e(),(0,a.jt)(),e),re={class:"map-view"},ie={id:"controls"},ce={class:"control-item"},le=ae((()=>(0,a.Lk)("label",{for:"startAddress"},"출발지",-1))),ue={class:"control-item"},pe=ae((()=>(0,a.Lk)("label",{for:"endAddress"},"도착지",-1))),de={id:"results"},me=ae((()=>(0,a.Lk)("h3",null,"경로를 선택하세요!",-1))),ke={class:"route"},ge={class:"route_con"},he={class:"route_time"},fe={class:"info_title"},ye={class:"info_sub"},be={class:"route_detail"},_e=ae((()=>(0,a.Lk)("span",{class:"r_head"},[(0,a.Lk)("span",{class:"icon"})],-1))),ve={class:"r_body"},Le={class:"r_title"},we=ae((()=>(0,a.Lk)("div",{class:"maker",style:{display:"none"}},[(0,a.eW)("powered by"),(0,a.Lk)("em",null,"www.ODsay.com")],-1))),Ce=ae((()=>(0,a.Lk)("div",{id:"map"},null,-1)));function Te(e,n,t,o,r,i){return(0,a.uX)(),(0,a.CE)("div",re,[(0,a.Lk)("div",ie,[(0,a.Lk)("div",ce,[le,(0,a.bo)((0,a.Lk)("input",{type:"text",id:"startAddress","onUpdate:modelValue":n[0]||(n[0]=n=>e.localStartPoint=n)},null,512),[[s.Jo,e.localStartPoint]])]),(0,a.Lk)("div",ue,[pe,(0,a.bo)((0,a.Lk)("input",{type:"text",id:"endAddress","onUpdate:modelValue":n[1]||(n[1]=n=>e.localEndPoint=n)},null,512),[[s.Jo,e.localEndPoint]])]),(0,a.Lk)("button",{onClick:n[2]||(n[2]=(...n)=>e.findRoute&&e.findRoute(...n))},"길찾기")]),(0,a.Lk)("div",de,[me,(0,a.Lk)("div",ke,[(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.routes,((n,t)=>((0,a.uX)(),(0,a.CE)("li",{key:t,class:"route"},[(0,a.Lk)("div",ge,[(0,a.Lk)("div",he,[(0,a.Lk)("span",fe,(0,P.v_)(e.formatTime(n.info.totalTime)),1),(0,a.Lk)("span",ye,[(0,a.Lk)("span",null,"도보 "+(0,P.v_)(n.info.totalWalk)+"분",1),(0,a.Lk)("span",null,"환승 "+(0,P.v_)(n.info.subwayTransitCount+n.info.busTransitCount)+"회",1),(0,a.Lk)("span",null,(0,P.v_)(n.info.payment)+"원",1),(0,a.Lk)("span",null,(0,P.v_)((n.info.totalDistance/1e3).toFixed(1))+"km",1)])]),(0,a.Lk)("div",be,[(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.subPath,((n,t)=>((0,a.uX)(),(0,a.CE)("li",{key:t,class:(0,P.C4)("line line_"+e.getLineClass(n.trafficType,n.lane.subwaycode))},[_e,(0,a.Lk)("span",ve,[(0,a.Lk)("span",Le,(0,P.v_)(n.startName)+" "+(0,P.v_)(e.getAction(n))+" "+(0,P.v_)(n.endName),1)])],2)))),128))]),we])])])))),128))])])]),Ce])}const Se=async()=>{try{const e=await L.A.get("https://76ba208b8cb9.ngrok.app/odsay/set-csrf-token/",{withCredentials:!0});return console.log("MapView.js >> CSRF token received:",e.data),e.data.csrfToken}catch(e){throw console.error("MapView.js >> Error fetching CSRF token:",e),e}},Pe="1s5yCSj5+42Zsh6xu6rX4A",Ae=L.A.create({baseURL:"https://76ba208b8cb9.ngrok.app",withCredentials:!0});Ae.interceptors.request.use((async e=>{try{const n=await Se();return e.headers["X-CSRFToken"]=n,console.log("MapView.js >> CSRF token set in request headers:",n),e}catch(n){return console.error("MapView.js >> Failed to set CSRF token in request headers:",n),Promise.reject(n)}}));var je={props:{memHome:String,startPoint:String,endPoint:String,memYoungY:Boolean,memYoungN:Boolean,memSubsidiaryYn:Boolean},data(){return{localStartPoint:this.startPoint,localEndPoint:this.endPoint,routes:[]}},methods:{async geocode(e){try{console.log("MapView.js >> Geocoding address:",e);const n=await Ae.get("/odsay/geocode/",{params:{address:e}});return console.log("MapView.js >> Geocode response:",n.data),n.data}catch(n){throw console.error("MapView.js >> Error geocoding address:",n),n.response&&console.error("MapView.js >> Error response data:",n.response.data),n}},async findRoute(){try{console.log("MapView.js >> Finding route with start point:",this.localStartPoint,"and end point:",this.localEndPoint);const e=await Ae.post("/odsay/geocode/",{address:this.localStartPoint}),n=await Ae.post("/odsay/geocode/",{address:this.localEndPoint}),{x:t,y:o}=e.data,{x:s,y:a}=n.data;console.log("MapView.js >> Start coordinates:",{sx:t,sy:o}),console.log("MapView.js >> End coordinates:",{ex:s,ey:a});const r=`https://api.odsay.com/v1/api/searchPubTransPathT?SX=${t}&SY=${o}&EX=${s}&EY=${a}&apiKey=${encodeURIComponent(Pe)}`,i=await L.A.get(r);console.log("MapView.js >> ODSAY API response:",i.data),i.data&&i.data.result&&i.data.result.path?this.routes=i.data.result.path:(console.error("MapView.js >> Unexpected API response format:",i.data),this.routes=[])}catch(e){console.error("MapView.js >> Error finding route:",e),e.response&&console.error("MapView.js >> Error response data:",e.response.data)}},formatTime(e){const n=Math.floor(e/60),t=e%60;return`${n}시간 ${t}분`},getLineClass(e,n){return 1===e?"bus":2===e?`sub${n}`:"walk"},getAction(e){return 1===e.trafficType?"승차":2===e.trafficType?"환승":"도보"},initializeMap(){if(window.naver){var e={center:new naver.maps.LatLng(37.5665,126.978),zoom:10};this.map=new naver.maps.Map("map",e)}else console.error("MapView.js >> Naver Maps API is not loaded.")}},async mounted(){this.initializeMap()}},xe={mixins:[je]};const Re=(0,l.A)(xe,[["render",Te],["__scopeId","data-v-5c5679aa"]]);var Fe=Re;function Ee(e){let n=null;if(document.cookie&&""!==document.cookie){const t=document.cookie.split(";");for(let o=0;o<t.length;o++){const s=t[o].trim();if(s.substring(0,e.length+1)===e+"="){n=decodeURIComponent(s.substring(e.length+1));break}}}return n}L.A.defaults.withCredentials=!0,L.A.defaults.xsrfCookieName="csrftoken",L.A.defaults.xsrfHeaderName="X-CSRFToken";var Me={components:{MapView:Fe},data(){return{showMapApi:!1,showCheckButton:!1,inputs:{mem_home:"",start_point:"",end_point:"",mem_young_y:!1,mem_young_n:!1,mem_subsidiary_yn:!1},formData:{mem_home:"",start_point:"",end_point:"",mem_young_y:!1,mem_young_n:!1,mem_subsidiary_yn:!1},csrfToken:Ee("csrftoken")}},methods:{async getCsrfToken(){const e="https://76ba208b8cb9.ngrok.app";console.log("mainone.js API Base URL:",e);try{const n=await L.A.get(`${e}/map/api/set-csrf-token/`,{withCredentials:!0});console.log("mainone.js CSRF token set successfully."),console.log("mainone.js Response data:",n.data);const t=n.data.csrfToken;this.csrfToken=t;const o=Ee("csrftoken");return console.log("mainone.js Retrieved CSRF token from cookie:",o),this.csrfToken=o||t,console.log("mainone.js CSRF 토큰:",this.csrfToken),this.csrfToken}catch(n){throw console.error("mainone.js Error setting CSRF token:",n),n}},handleCheckboxChange(e){"mem_young_y"===e?(this.inputs.mem_young_y=!0,this.inputs.mem_young_n=!1):"mem_young_n"===e&&(this.inputs.mem_young_y=!1,this.inputs.mem_young_n=!0)},async handleSubmit(e){e.preventDefault(),await this.checkInputs()},async checkInputs(){try{this.csrfToken||await this.getCsrfToken(),this.formData={...this.inputs};const e="https://76ba208b8cb9.ngrok.app";console.log("mainone.js API Base URL:",e),console.log("mainone.js CSRF Token:",this.csrfToken),console.log("mainone.js Inputs:",this.inputs);const n=await L.A.post(`${e}/map/api/data/`,{mem_home:this.inputs.mem_home,start_point:this.inputs.start_point,end_point:this.inputs.end_point,mem_young_y:this.inputs.mem_young_y,mem_young_n:this.inputs.mem_young_n,mem_subsidiary_yn:this.inputs.mem_subsidiary_yn},{headers:{"X-CSRFToken":this.csrfToken,"Content-Type":"application/json"},withCredentials:!0});console.log("mainone.js Response:",n.data),this.showMapApi=!0,this.showCheckButton=!0}catch(e){console.error("mainone.js Error:",e)}}},mounted(){this.getCsrfToken()}},Ie={mixins:[Me],components:{MapView:Fe},methods:{redirectToNaverLogin:o.redirectToNaverLogin}};const Ve=(0,l.A)(Ie,[["render",se]]);var Ue=Ve;const $e=[{path:"/",name:"IntroPage",component:S},{path:"/login",name:"LoginPage",component:M},{path:"/MainOne",name:"MainOne",component:Ue}],Xe=(0,d.aE)({history:(0,d.LA)("/"),routes:$e});var Ne=Xe;L.A.defaults.withCredentials=!0,L.A.defaults.xsrfCookieName="csrftoken",L.A.defaults.xsrfHeaderName="X-CSRFToken";const Oe="https://76ba208b8cb9.ngrok.app";console.log(`API Base URL: ${Oe}`),L.A.get(`${Oe}/map/set-csrf-token/`).then((e=>{console.log("main.js >> CSRF Token response:",e),L.A.defaults.headers.common["X-CSRFToken"]=e.data.csrfToken})).catch((e=>{console.error("Error getting CSRF Token: ",e)}));const De=(0,s.Ef)(p);De.config.globalProperties.$http=L.A,De.use(Ne).mount("#app")}},n={};function t(o){var s=n[o];if(void 0!==s)return s.exports;var a=n[o]={exports:{}};return e[o].call(a.exports,a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(n,o,s,a){if(!o){var r=1/0;for(u=0;u<e.length;u++){o=e[u][0],s=e[u][1],a=e[u][2];for(var i=!0,c=0;c<o.length;c++)(!1&a||r>=a)&&Object.keys(t.O).every((function(e){return t.O[e](o[c])}))?o.splice(c--,1):(i=!1,a<r&&(r=a));if(i){e.splice(u--,1);var l=s();void 0!==l&&(n=l)}}return n}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[o,s,a]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={524:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var s,a,r=o[0],i=o[1],c=o[2],l=0;if(r.some((function(n){return 0!==e[n]}))){for(s in i)t.o(i,s)&&(t.m[s]=i[s]);if(c)var u=c(t)}for(n&&n(o);l<r.length;l++)a=r[l],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(u)},o=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(4681)}));o=t.O(o)})();
//# sourceMappingURL=app.f30299d6.js.map