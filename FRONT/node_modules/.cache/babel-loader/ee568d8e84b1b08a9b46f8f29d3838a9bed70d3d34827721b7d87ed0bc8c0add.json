{"ast":null,"code":"import axios from 'axios';\nimport MapView from '../../components/MapView.vue'; // MapView 컴포넌트를 임포트합니다.\n\nfunction getCookie(name) {\n  let cookieValue = null;\n  if (document.cookie && document.cookie !== '') {\n    const cookies = document.cookie.split(';');\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim();\n      if (cookie.substring(0, name.length + 1) === name + '=') {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n  return cookieValue;\n}\nconst csrftoken = getCookie('csrftoken');\nexport default {\n  components: {\n    MapView\n  },\n  data() {\n    return {\n      showMapApi: false,\n      showCheckButton: false,\n      inputs: {\n        mem_home: '',\n        start_point: '',\n        end_point: '',\n        mem_young_y: false,\n        mem_young_n: false,\n        mem_subsidiary_yn: false\n      },\n      formData: {\n        mem_home: '',\n        start_point: '',\n        end_point: '',\n        mem_young_y: false,\n        mem_young_n: false,\n        mem_subsidiary_yn: false\n      }\n    };\n  },\n  methods: {\n    getCsrfToken() {\n      axios.get('/set_csrf_token').then(response => {\n        console.log('CSRF token set successfully.');\n        console.log(response.data);\n      }).catch(error => {\n        console.error('Error setting CSRF token:', error);\n      });\n    },\n    handleCheckboxChange(field) {\n      if (field === 'mem_young_y') {\n        this.inputs.mem_young_y = true;\n        this.inputs.mem_young_n = false;\n      } else if (field === 'mem_young_n') {\n        this.inputs.mem_young_n = true;\n        this.inputs.mem_young_y = false;\n      }\n    },\n    handleSubmit() {\n      // 모든 필드가 채워져 있는지 확인\n      if (!this.inputs.mem_home || !this.inputs.start_point || !this.inputs.end_point) {\n        alert('거주지와 출발지/도착지의 모든 필드를 채워주세요.');\n        return;\n      }\n\n      // 적어도 하나의 체크박스가 선택되었는지 확인\n      if (!this.inputs.mem_young_y && !this.inputs.mem_young_n) {\n        alert('연령대 중 적어도 하나를 선택해야 합니다.');\n        return;\n      }\n      this.formData = {\n        ...this.inputs\n      };\n      console.log(\"제출된 데이터:\", this.formData);\n      console.log(\"CSRF 토큰:\", csrftoken);\n      const url = '/map/api/data'; // Django의 API 엔드포인트 URL\n\n      axios.post(url, this.formData, {\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': csrftoken\n        }\n      }).then(response => {\n        this.showMapApi = true;\n        this.showCheckButton = true;\n        console.log(\"서버 응답:\", response.data);\n      }).catch(error => {\n        if (error.response) {\n          console.error(\"서버 응답 오류:\", error.response.data);\n          console.error(\"상태 코드:\", error.response.status);\n          console.error(\"헤더:\", error.response.headers);\n        } else if (error.request) {\n          console.error(\"요청 오류:\", error.request);\n        } else {\n          console.error(\"설정 오류:\", error.message);\n        }\n        console.error(\"설정:\", error.config);\n      });\n    }\n  },\n  mounted() {\n    this.getCsrfToken();\n  }\n};","map":{"version":3,"names":["axios","MapView","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","csrftoken","components","data","showMapApi","showCheckButton","inputs","mem_home","start_point","end_point","mem_young_y","mem_young_n","mem_subsidiary_yn","formData","methods","getCsrfToken","get","then","response","console","log","catch","error","handleCheckboxChange","field","handleSubmit","alert","url","post","headers","status","request","message","config","mounted"],"sources":["/Users/parkjiyoung/Desktop/computer/smart_injae/hackshim_project/saveus_proto/saveus/frontend/src/assets/js/MainOne.js"],"sourcesContent":["import axios from 'axios';\nimport MapView from '../../components/MapView.vue'; // MapView 컴포넌트를 임포트합니다.\n\nfunction getCookie(name) {\n    let cookieValue = null;\n    if (document.cookie && document.cookie !== '') {\n        const cookies = document.cookie.split(';');\n        for (let i = 0; i < cookies.length; i++) {\n            const cookie = cookies[i].trim();\n            if (cookie.substring(0, name.length + 1) === (name + '=')) {\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                break;\n            }\n        }\n    }\n    return cookieValue;\n}\n\nconst csrftoken = getCookie('csrftoken');\n\nexport default {\n    components: {\n        MapView\n    },\n    data() {\n        return {\n            showMapApi: false,\n            showCheckButton: false,\n            inputs: {\n                mem_home: '',\n                start_point: '',\n                end_point: '',\n                mem_young_y: false,\n                mem_young_n: false,\n                mem_subsidiary_yn: false\n            },\n            formData: {\n                mem_home: '',\n                start_point: '',\n                end_point: '',\n                mem_young_y: false,\n                mem_young_n: false,\n                mem_subsidiary_yn: false\n            }\n        };\n    },\n    methods: {\n        getCsrfToken() {\n            axios.get('/set_csrf_token')\n                .then(response => {\n                    console.log('CSRF token set successfully.');\n                    console.log(response.data);\n                })\n                .catch(error => {\n                    console.error('Error setting CSRF token:', error);\n                });\n        },\n        handleCheckboxChange(field) {\n            if (field === 'mem_young_y') {\n                this.inputs.mem_young_y = true;\n                this.inputs.mem_young_n = false;\n            } else if (field === 'mem_young_n') {\n                this.inputs.mem_young_n = true;\n                this.inputs.mem_young_y = false;\n            }\n        },\n\n        handleSubmit() {\n            // 모든 필드가 채워져 있는지 확인\n            if (!this.inputs.mem_home || !this.inputs.start_point || !this.inputs.end_point) {\n                alert('거주지와 출발지/도착지의 모든 필드를 채워주세요.');\n                return;\n            }\n\n            // 적어도 하나의 체크박스가 선택되었는지 확인\n            if (!this.inputs.mem_young_y && !this.inputs.mem_young_n) {\n                alert('연령대 중 적어도 하나를 선택해야 합니다.');\n                return;\n            }\n\n            this.formData = { ...this.inputs };\n            console.log(\"제출된 데이터:\", this.formData);\n            console.log(\"CSRF 토큰:\", csrftoken);\n\n            const url = '/map/api/data'; // Django의 API 엔드포인트 URL\n\n            axios.post(url, this.formData, {\n                headers: {\n                    'Content-Type': 'application/json',\n                    'X-CSRFToken': csrftoken\n                }\n            })\n            .then(response => {\n                this.showMapApi = true;\n                this.showCheckButton = true;\n                console.log(\"서버 응답:\", response.data);\n            })\n            .catch(error => {\n                if (error.response) {\n                    console.error(\"서버 응답 오류:\", error.response.data);\n                    console.error(\"상태 코드:\", error.response.status);\n                    console.error(\"헤더:\", error.response.headers);\n                } else if (error.request) {\n                    console.error(\"요청 오류:\", error.request);\n                } else {\n                    console.error(\"설정 오류:\", error.message);\n                }\n                console.error(\"설정:\", error.config);\n            });\n        },\n    },\n    mounted() {\n        this.getCsrfToken();\n    },\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}