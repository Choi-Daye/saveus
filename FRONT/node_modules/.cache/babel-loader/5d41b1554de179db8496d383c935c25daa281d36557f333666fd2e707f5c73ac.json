{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport CardRecomMixin from '../assets/js/CardRecom.js';\nimport CardDetail from './CardDetail.vue'; // CardDetail Ïª¥Ìè¨ÎÑåÌä∏ Î∂àÎü¨Ïò§Í∏∞\nimport ChatBot from './ChatBot.vue'; // ChatBot Ïª¥Ìè¨ÎÑåÌä∏ Î∂àÎü¨Ïò§Í∏∞\n\nexport default {\n  name: 'CardRecom',\n  components: {\n    CardDetail,\n    ChatBot\n  },\n  // CardDetail Ïª¥Ìè¨ÎÑåÌä∏ Îì±Î°ù\n  mixins: [CardRecomMixin],\n  props: {\n    startPoint: String,\n    endPoint: String\n  },\n  data() {\n    return {\n      selectedCardId: null,\n      localStartPoint: this.startPoint,\n      // propsÎ°úÎ∂ÄÌÑ∞ Îç∞Ïù¥ÌÑ∞Î•º dataÎ°ú ÏÑ§Ï†ï\n      localEndPoint: this.endPoint,\n      // propsÎ°úÎ∂ÄÌÑ∞ Îç∞Ïù¥ÌÑ∞Î•º dataÎ°ú ÏÑ§Ï†ï\n      routes: JSON.parse(this.$route.query.routes || '[]') // queryÎ°úÎ∂ÄÌÑ∞ routes ÌååÏã±\n    };\n  },\n  methods: {\n    handleRouteClick(route) {\n      this.selectedPayment = route.payment; // ÏÑ†ÌÉùÎêú Í≤ΩÎ°úÏùò payment Í∞íÏùÑ Ï†ÄÏû•\n      console.log(\"Selected route payment:\", this.selectedPayment);\n    },\n    modalOpen(cardId) {\n      console.log(\"Opening modal for card:\", cardId);\n      this.selectedCardId = cardId;\n      this.$refs.modalWrap.classList.add('show');\n    },\n    modalClose() {\n      this.selectedCardId = null;\n      this.$refs.modalWrap.classList.remove('show');\n    },\n    filteredSubPaths(subPaths) {\n      return subPaths.filter(subPath => subPath.trafficType !== 3);\n    },\n    goToDetail(cardId) {\n      console.log(`Navigating to card detail for card id: ${cardId}`);\n      this.$router.push({\n        name: 'CardDetail',\n        params: {\n          id: cardId\n        }\n      });\n    },\n    getFormattedAltText(altText) {\n      const parts = altText.split('_');\n      if (parts.length === 2) {\n        return `[${parts[1]}] ${parts[0]}`;\n      } else if (parts.length === 3) {\n        return `[${parts[2]}] ${parts[0]} : ${parts[1]}`;\n      } else if (parts.length === 4) {\n        return `[${parts[2]}: ${parts[3]}] ${parts[0]} : ${parts[1]}`;\n      }\n      return altText;\n    },\n    getTrafficClass(subPath, isBar = false) {\n      const prefix = isBar ? 'bar_' : '';\n      if (subPath.trafficType === 2) {\n        const busClass = `${prefix}bus${subPath.lane && subPath.lane[0] ? subPath.lane[0].type : ''}`;\n        console.log('Bus class:', busClass);\n        return busClass;\n      } else if (subPath.trafficType === 1) {\n        const subClass = `${prefix}sub${subPath.lane && subPath.lane[0] ? subPath.lane[0].subwayCode : ''}`;\n        console.log('Subway class:', subClass);\n        return subClass;\n      } else {\n        const walkClass = `${prefix}line_walk`;\n        console.log('Walk class:', walkClass);\n        return walkClass;\n      }\n    }\n  },\n  watch: {\n    startPoint(newVal) {\n      this.localStartPoint = newVal;\n    },\n    endPoint(newVal) {\n      this.localEndPoint = newVal;\n    }\n  },\n  mounted() {\n    console.log('Received routes:', this.routes);\n  }\n};","map":{"version":3,"names":["CardRecomMixin","CardDetail","ChatBot","name","components","mixins","props","startPoint","String","endPoint","data","selectedCardId","localStartPoint","localEndPoint","routes","JSON","parse","$route","query","methods","handleRouteClick","route","selectedPayment","payment","console","log","modalOpen","cardId","$refs","modalWrap","classList","add","modalClose","remove","filteredSubPaths","subPaths","filter","subPath","trafficType","goToDetail","$router","push","params","id","getFormattedAltText","altText","parts","split","length","getTrafficClass","isBar","prefix","busClass","lane","type","subClass","subwayCode","walkClass","watch","newVal","mounted"],"sources":["/Users/parkjiyoung/Desktop/computer/smart_injae/hackshim_project/saveus_proto/saveus/frontend/src/views/CardRecom.vue"],"sourcesContent":["<template>\n    <div class=\"map-view\">\n        <div class=\"controls-results-chart-container\">\n            <div id=\"controls\">\n                <div class=\"control-item\">\n                    <label for=\"startAddress\">Ï∂úÎ∞úÏßÄ</label>\n                    <input type=\"text\" id=\"startAddress\" v-model=\"localStartPoint\">\n                </div>\n                <div class=\"control-item\">\n                    <label for=\"endAddress\">ÎèÑÏ∞©ÏßÄ</label>\n                    <input type=\"text\" id=\"endAddress\" v-model=\"localEndPoint\">\n                </div>\n                <button @click=\"findRoute\">Í∏∏Ï∞æÍ∏∞</button>\n            </div>\n            <div class=\"results-chart\">\n                <div id=\"results\">\n                    <h3> üß≠ Í≤ΩÎ°úÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî! üß≠ </h3>\n                    <div class=\"route-list-box\">\n                        <ul class=\"route-list\">\n                            <li v-for=\"(route, index) in routes\" :key=\"index\" class=\"route-data\">\n                                <div class=\"route_con\" @click=\"handleRouteClick(route)\">\n                                    <div class=\"route_time_header\"> [Ï¥ù ÏÜåÏöî ÏãúÍ∞Ñ] {{ formatTime(route.totalTime) }}</div>\n                                    <div class=\"route_time\">\n                                        <span class=\"info_sub\">\n                                            <span>ÌôòÏäπ {{ route.subwayTransitCount + route.busTransitCount - 1 }}Ìöå | </span>\n                                            <span>{{ route.payment }}Ïõê | </span>\n                                            <span>{{ (route.totalDistance / 1000).toFixed(1) }}km</span>\n                                        </span>\n                                    </div>\n                                    <div class=\"route_bar\">\n                                        <span \n                                            v-for=\"(subPath, subIndex) in route.subPaths\" \n                                            :key=\"subIndex\"\n                                            :class=\"['bar_area', getTrafficClass(subPath, true)]\"\n                                            :style=\"{ flexBasis: `${subPath.sectionTime * 100}%`, minWidth: '6.5%' }\"\n                                        >\n                                            <span class=\"bar\">\n                                                <span class=\"time\">{{ subPath.sectionTime }}Î∂Ñ</span>\n                                            </span>\n                                        </span>\n                                    </div>\n                                    <div class=\"route_detail\">\n                                        <ul class=\"route-detail-list\">\n                                            <li v-for=\"(subPath, subIndex) in filteredSubPaths(route.subPaths)\" :key=\"subIndex\" class=\"line\">\n                                                <span class=\"icon\" :class=\"getTrafficClass(subPath)\"></span>\n                                                <span class=\"r_body\">\n                                                    <span class=\"r_action\">{{ getAction(subPath, subPath.startName, subPath.lane) }}</span>\n                                                </span>\n                                            </li>\n                                            <li :key=\"route.subPaths.length\" class=\"line\">\n                                                <span class=\"icon\"></span>\n                                                <span class=\"r_body\">\n                                                    <span class=\"r_title\">‚û™ {{ route.lastEndStation }} ÌïòÏ∞®</span>\n                                                </span>\n                                            </li>\n                                        </ul>\n                                        <div class=\"maker\" style=\"display: none;\">powered by<em>www.ODsay.com</em></div>\n                                    </div>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n                <div id=\"chat\">\n                    <ChatBot />\n                </div>\n            </div>\n        </div>\n        <div id=\"cardsList\">\n            <!-- Ïπ¥Îìú Î™©Î°ù -->\n            <div id=\"cards\">\n                \n                <div v-for=\"card in cards\" :key=\"card.id\" class=\"card\" @click=\"modalOpen(card.id)\">\n                    <img :src=\"card.imgSrc\" :alt=\"card.altText\"/>\n                    <p>{{ getFormattedAltText(card.altText) }}</p>\n                </div>\n\n                <div class=\"modal-wrap\" ref=\"modalWrap\">\n                    <div class=\"modal-container\">\n                        <div class=\"modal-content\" v-if=\"selectedCardId\">\n                            <!-- Ïó¨Í∏∞Ïóê CardDetaul Ïª¥Ìè¨ÎÑåÌä∏ Î∂àÎü¨Ïò§Í∏∞ -->\n                            <CardDetail :id=\"selectedCardId\" />\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button @click=\"modalClose\">close</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport CardRecomMixin from '../assets/js/CardRecom.js';\nimport CardDetail from './CardDetail.vue'; // CardDetail Ïª¥Ìè¨ÎÑåÌä∏ Î∂àÎü¨Ïò§Í∏∞\nimport ChatBot from './ChatBot.vue'; // ChatBot Ïª¥Ìè¨ÎÑåÌä∏ Î∂àÎü¨Ïò§Í∏∞\n\n\nexport default {\n    name: 'CardRecom',\n    components: { CardDetail, ChatBot }, // CardDetail Ïª¥Ìè¨ÎÑåÌä∏ Îì±Î°ù\n    mixins: [CardRecomMixin],\n    props: {\n        startPoint: String,\n        endPoint: String\n    },\n    data() {\n        return {\n            selectedCardId: null,\n            localStartPoint: this.startPoint,  // propsÎ°úÎ∂ÄÌÑ∞ Îç∞Ïù¥ÌÑ∞Î•º dataÎ°ú ÏÑ§Ï†ï\n            localEndPoint: this.endPoint,      // propsÎ°úÎ∂ÄÌÑ∞ Îç∞Ïù¥ÌÑ∞Î•º dataÎ°ú ÏÑ§Ï†ï\n            routes: JSON.parse(this.$route.query.routes || '[]')  // queryÎ°úÎ∂ÄÌÑ∞ routes ÌååÏã±\n        };\n    },\n    methods: {\n        handleRouteClick(route) {\n            this.selectedPayment = route.payment; // ÏÑ†ÌÉùÎêú Í≤ΩÎ°úÏùò payment Í∞íÏùÑ Ï†ÄÏû•\n            console.log(\"Selected route payment:\", this.selectedPayment);\n        },\n        modalOpen(cardId) {\n            console.log(\"Opening modal for card:\", cardId);\n            this.selectedCardId = cardId;\n            this.$refs.modalWrap.classList.add('show');\n        },\n        modalClose() {\n            this.selectedCardId = null;\n            this.$refs.modalWrap.classList.remove('show');\n        },\n        filteredSubPaths(subPaths) {\n            return subPaths.filter(subPath => subPath.trafficType !== 3);\n        },\n        goToDetail(cardId) {\n            console.log(`Navigating to card detail for card id: ${cardId}`);\n            this.$router.push({ name: 'CardDetail', params: { id: cardId } });\n        },\n        getFormattedAltText(altText) {\n            const parts = altText.split('_');\n            if (parts.length === 2) {\n                return `[${parts[1]}] ${parts[0]}`;\n            } else if (parts.length === 3) {\n                return `[${parts[2]}] ${parts[0]} : ${parts[1]}`;\n            } else if (parts.length === 4) {\n                return `[${parts[2]}: ${parts[3]}] ${parts[0]} : ${parts[1]}`;\n            }\n            return altText;\n        },\n        getTrafficClass(subPath, isBar = false) {\n            const prefix = isBar ? 'bar_' : '';\n            if (subPath.trafficType === 2) {\n                const busClass = `${prefix}bus${subPath.lane && subPath.lane[0] ? subPath.lane[0].type : ''}`;\n                console.log('Bus class:', busClass);\n                return busClass;\n            } else if (subPath.trafficType === 1) {\n                const subClass = `${prefix}sub${subPath.lane && subPath.lane[0] ? subPath.lane[0].subwayCode : ''}`;\n                console.log('Subway class:', subClass);\n                return subClass;\n            } else {\n                const walkClass = `${prefix}line_walk`;\n                console.log('Walk class:', walkClass);\n                return walkClass;\n            }\n        }\n    },\n    watch: {\n        startPoint(newVal) {\n            this.localStartPoint = newVal;\n        },\n        endPoint(newVal) {\n            this.localEndPoint = newVal;\n        }\n    },\n    mounted() {\n        console.log('Received routes:', this.routes);\n    }\n};\n</script>\n\n<style scoped src=\"../assets/css/CardRecom.css\"></style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}